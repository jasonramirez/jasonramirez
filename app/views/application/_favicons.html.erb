<link rel="apple-touch-icon" type="image/png" href="<%= image_path "favicons/dark/apple-icon-57x57.png" %>" data-dark-href="<%= image_path "favicons/dark/apple-icon-57x57.png" %>" data-light-href="<%= image_path "favicons/light/apple-icon-57x57.png" %>" sizes="57x57">
<link rel="apple-touch-icon" type="image/png" href="<%= image_path "favicons/dark/apple-icon-60x60.png" %>" data-dark-href="<%= image_path "favicons/dark/apple-icon-60x60.png" %>" data-light-href="<%= image_path "favicons/light/apple-icon-60x60.png" %>" sizes="60x60">
<link rel="apple-touch-icon" type="image/png" href="<%= image_path "favicons/dark/apple-icon-72x72.png" %>" data-dark-href="<%= image_path "favicons/dark/apple-icon-72x72.png" %>" data-light-href="<%= image_path "favicons/light/apple-icon-72x72.png" %>" sizes="72x72">
<link rel="apple-touch-icon" type="image/png" href="<%= image_path "favicons/dark/apple-icon-76x76.png" %>" data-dark-href="<%= image_path "favicons/dark/apple-icon-76x76.png" %>" data-light-href="<%= image_path "favicons/light/apple-icon-76x76.png" %>" sizes="76x76">
<link rel="apple-touch-icon" type="image/png" href="<%= image_path "favicons/dark/apple-icon-114x114.png" %>" data-dark-href="<%= image_path "favicons/dark/apple-icon-114x114.png" %>" data-light-href="<%= image_path "favicons/light/apple-icon-114x114.png" %>" sizes="114x114">
<link rel="apple-touch-icon" type="image/png" href="<%= image_path "favicons/dark/apple-icon-120x120.png" %>" data-dark-href="<%= image_path "favicons/dark/apple-icon-120x120.png" %>" data-light-href="<%= image_path "favicons/light/apple-icon-120x120.png" %>" sizes="120x120">
<link rel="apple-touch-icon" type="image/png" href="<%= image_path "favicons/dark/apple-icon-144x144.png" %>" data-dark-href="<%= image_path "favicons/dark/apple-icon-144x144.png" %>" data-light-href="<%= image_path "favicons/light/apple-icon-144x144.png" %>" sizes="144x144">
<link rel="apple-touch-icon" type="image/png" href="<%= image_path "favicons/dark/apple-icon-152x152.png" %>" data-dark-href="<%= image_path "favicons/dark/apple-icon-152x152.png" %>" data-light-href="<%= image_path "favicons/light/apple-icon-152x152.png" %>" sizes="152x152">
<link rel="apple-touch-icon" type="image/png" href="<%= image_path "favicons/dark/apple-icon-180x180.png" %>" data-dark-href="<%= image_path "favicons/dark/apple-icon-180x180.png" %>" data-light-href="<%= image_path "favicons/light/apple-icon-180x180.png" %>" sizes="180x180">
<link rel="icon" type="image/png" href="<%= image_path "favicons/dark/android-icon-192x192.png" %>" data-dark-href="<%= image_path "favicons/dark/android-icon-192x192.png" %>" data-light-href="<%= image_path "favicons/light/android-icon-192x192.png" %>" sizes="192x192">
<link rel="icon" type="image/png" href="<%= image_path "favicons/dark/favicon-16x16.png" %>" data-dark-href="<%= image_path "favicons/dark/favicon-16x16.png" %>" data-light-href="<%= image_path "favicons/light/favicon-16x16.png" %>" sizes="16x16">
<link rel="icon" type="image/png" href="<%= image_path "favicons/dark/favicon-32x32.png" %>" data-dark-href="<%= image_path "favicons/dark/favicon-32x32.png" %>" data-light-href="<%= image_path "favicons/light/favicon-32x32.png" %>" sizes="32x32">
<link rel="icon" type="image/png" href="<%= image_path "favicons/dark/favicon-96x96.png" %>" data-dark-href="<%= image_path "favicons/dark/favicon-96x96.png" %>" data-light-href="<%= image_path "favicons/light/favicon-96x96.png" %>" sizes="96x96">

<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="<%= image_path("favicons/dark/ms-icon-144x144.png") %>" data-dark-href="<%= image_path("favicons/dark/ms-icon-144x144.png") %>" data-light-href="<%= image_path("favicons/light/ms-icon-144x144.png") %>">
<meta name="theme-color" content="#ffffff">

<link rel="manifest" href="<%= image_path("favicons/dark/manifest.json") %>">

<script>
  // Update favicon links immediately based on stored theme
  (function() {
    const theme = localStorage.getItem('theme') || 'dark';
    const faviconLinks = document.querySelectorAll('link[rel*="icon"]');
    faviconLinks.forEach((link) => {
      const darkHref = link.getAttribute('data-dark-href');
      const lightHref = link.getAttribute('data-light-href');
      if (darkHref && lightHref) {
        link.setAttribute('href', theme === 'light' ? lightHref : darkHref);
      }
    });
    
    const msTileImage = document.querySelector('meta[name="msapplication-TileImage"]');
    if (msTileImage) {
      const darkHref = msTileImage.getAttribute('data-dark-href');
      const lightHref = msTileImage.getAttribute('data-light-href');
      if (darkHref && lightHref) {
        msTileImage.setAttribute('content', theme === 'light' ? lightHref : darkHref);
      }
    }
  })();
</script>
