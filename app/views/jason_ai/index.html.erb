<section class="content-full-viewport jason-ai">  
  <div class="jason-ai-chat-container" data-jason-ai-chat-container="true">
    <div class="jason-ai-chat-history">
      <h1 class="jason-ai-title-image__text u-margin-bottom-large">
        jason.ai
      </h1>

      <div>
        <div class="jason-ai-hand-wave">
          <%= inline_svg "icon-brain.svg", height: "20px", width: "20px" %>
        </div>
      </div>

      <%= render 'chat_message', message: OpenStruct.new(
          message_type: 'answer',
          content: "This is my AI-powered knowledge base, trained on my thoughts, 
            experiences, and insights from years of building products and leading teams. 
            I'm here to try an offer mentorship, frameworks, and ideas that might
            help you on your journey.",
          created_at: Time.current
        ) %>
    
      <% if @chat_messages.any? %>
        <%= render partial: 'chat_message', collection: @chat_messages, as: :message %>
      <% else %>
        <%= render 'chat_message', message: OpenStruct.new(
          message_type: 'answer',
          content: "Ask me anything about my work, experience, or thoughts on design and leadership.",
          created_at: Time.current
        ) %>
      <% end %>
    </div>
        <!-- Scroll to bottom button -->
    <button type="button" 
      class="jason-ai-scroll-to-bottom button button--secondary"
      data-scroll-to-bottom="true"
      style="display: none;">
      <%= inline_svg "icon-arrow-down.svg", height: "16px", width: "16px" %>
      <span>New message</span>
    </button>
  </div>

  <div class="jason-ai-chat-prompt">
    <%= form_with url: ask_jason_ai_path,
      local: false,
      class: "jason-ai-chat-prompt__form",
      data: { jason_ai_chat: true } do |form| %>
      <button type="button" 
        class="jason-ai-mobile-nav-trigger button button--secondary"
        data-action="click->navigation-drawer#toggle"
        onclick="console.log('Button clicked!')">
        <%= inline_svg "icon-menu.svg", height: "20px", width: "20px" %>
      </button>
      <%= form.text_field :question, 
        placeholder: "What would you like to know?",
        required: true,
        name: "question" %>
      <%= form.button type: 'submit',
        class: "button button--square",
        data: { jason_ai_chat_button: true } do %>
        <%= inline_svg "icon-arrow-up.svg" %>
      <% end %>
    <% end %>
  </div>
</section>