<section class="content content--slim">
  <div>
    <h1>Request Login</h1>
    
    <% if @user.errors.any? %>
      <div class="alert alert--error">
        <h4>Please fix the following errors:</h4>
        <ul>
          <% @user.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    
    <div>
      <p><strong>Note:</strong> All accounts are given 48 hours of access from the 
      moment of first login. Account requests require admin approval before you can 
      log in. If you haven't received an account within 24 hours, please email me at 
      jason@jasonramirez.com.
      </p>
    </div>

    <%= form_with model: @user, url: chat_register_path, method: :post, data: { turbo: false } do |form| %>
      <div class="sky-label" data-controller="lowercase-input">
        <%= form.text_field :name,
          required: true,
          style: "text-transform: lowercase;",
          pattern: "[a-z0-9_.-]+",
          title: "Username must be lowercase letters, numbers, underscores, periods, or hyphens only",
          data: { lowercase_input_target: "field" } %>
        <%= form.label :name, "Username" %>
      </div>

      <div class="sky-label">
        <%= form.email_field :email, required: true %>
        <%= form.label :email, "Email" %>
      </div>

      <div class="sky-label">
        <%= form.password_field :password, required: true %>
        <%= form.label :password, "Password" %>
      </div>

     <%= form.submit "Request Account", class: "button button--primary u-margin-bottom-large" %>
    <% end %>
    
    <div>
      <p>Already have an account? <%= link_to "Login here", chat_login_path, class: "link" %></p>
    </div>
  </div>
</section>